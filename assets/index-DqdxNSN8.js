import{f as e,j as t,r as s}from"./index-CFOLjTcl.js";import"./vendor-D4yKRiT4.js";import"./supabase-Q1HUyF7G.js";function a(e){return"string"==typeof e&&36===e.length&&"7"===e.charAt(14)}function r({participants:s,updatedAt:a}){const r=e(a).slice(0,5);return t.jsxs("div",{className:"text-xs mb-2 flex flex-wrap gap-2 items-center",children:[t.jsxs("span",{className:"text-xs text-gray-500 mr-2",children:["[",r,"]"]}),t.jsx("span",{className:"text-xs",children:"参加者:"}),0===s.length?t.jsx("b",{className:"text-xs",children:"（なし）"}):s.map((e=>t.jsx("span",{className:"font-bold text-xs",style:{color:e.color,marginLeft:6,marginRight:3,textShadow:"0 1px 1px #fff"},children:e.name},e.uuid)))]})}function n(t){return t.optimistic?"送信中...":e(t.time)}function i({chat:e}){return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"mb-1",children:[t.jsx("span",{className:"font-bold",style:{color:e.color,fontSize:"1.08em"},children:e.name}),e.email?t.jsx("a",{className:"font-bold text-gray-400 underline text-blue-600 px-1",href:`mailto:${e.email}`,title:e.email,target:"_blank",rel:"noopener noreferrer",children:">"}):t.jsx("span",{className:"font-bold text-gray-400 px-1",children:">"}),t.jsx("span",{className:"ml-1 text-gray-700",children:e.message}),t.jsxs("span",{className:"ml-2 text-xs text-gray-400 "+(e.optimistic?"animate-pulse":""),children:["(",n(e),")"]})]})})}function l({className:e=""}={}){return t.jsx("hr",{className:`bleed-x border-0 border-t-2 border-b border-t-ie-gray border-b-white h-0 my-2 ${e}`.trim()})}function o({chatLog:e,isLoading:n=!1,windowRows:o,participants:c,currentTime:m}){var d;const x=function(e){return[...e].sort(((e,t)=>a(e.uuid)&&a(t.uuid)?t.uuid.localeCompare(e.uuid):t.time-e.time))}([...e]).slice(0,o),p=(null==(d=x[0])?void 0:d.time)??m??Date.now();return n?t.jsx("div",{className:"text-gray-400 mt-8 animate-pulse",children:"チャットログを読み込み中..."}):t.jsxs("div",{className:"overflow-y-auto rounded-none mt-2 pb-4 font-yui px-[var(--page-gap)]","data-testid":"chat-log-list",children:[t.jsx(r,{participants:c,updatedAt:p}),t.jsx(l,{}),0===x.length&&t.jsx("div",{className:"text-gray-400 py-3",children:"まだ発言はありません。"}),x.map((e=>t.jsxs(s.Fragment,{children:[t.jsx(i,{chat:e}),t.jsx(l,{})]},e.uuid)))]})}export{o as default};
