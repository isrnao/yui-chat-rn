import{j as e,f as t}from"./index-CQ2_WAmS.js";import"./vendor-D4yKRiT4.js";import"./supabase-Q1HUyF7G.js";function s(e){return"string"==typeof e&&36===e.length&&"7"===e.charAt(14)}function a({participants:s}){return e.jsxs("div",{className:"text-xs mb-2 flex flex-wrap gap-2 items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 mr-2",children:["[",t(Date.now()).slice(0,5),"]"]}),e.jsx("span",{className:"text-xs",children:"参加者:"}),0===s.length?e.jsx("b",{className:"text-xs",children:"（なし）"}):s.map((t=>e.jsx("span",{className:"font-bold text-xs",style:{color:t.color,marginLeft:6,marginRight:3,textShadow:"0 1px 1px #fff"},children:t.name},t.uuid)))]})}function r(e){return e.optimistic?"送信中...":t(e.time)}function n({chat:t}){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"mb-1",children:[e.jsx("span",{className:"font-bold",style:{color:t.color,fontSize:"1.08em"},children:t.name}),t.email?e.jsx("a",{className:"font-bold text-gray-400 underline text-blue-600 px-1",href:`mailto:${t.email}`,title:t.email,target:"_blank",rel:"noopener noreferrer",children:">"}):e.jsx("span",{className:"font-bold text-gray-400 px-1",children:">"}),e.jsx("span",{className:"ml-1 text-gray-700",children:t.message}),e.jsxs("span",{className:"ml-2 text-xs text-gray-400 "+(t.optimistic?"animate-pulse":""),children:["(",r(t),")"]})]})})}function i(){return e.jsx("hr",{className:"border-0 border-t-2 border-b border-t-[var(--ie-gray)] border-b-white h-0 my-2"})}function l({chatLog:t,isLoading:r=!1,windowRows:l,participants:o}){const c=function(e){return[...e].sort(((e,t)=>s(e.uuid)&&s(t.uuid)?t.uuid.localeCompare(e.uuid):t.time-e.time))}([...t]).slice(0,l);return r?e.jsx("div",{className:"text-gray-400 mt-8 animate-pulse",children:"チャットログを読み込み中..."}):e.jsxs("div",{className:"overflow-y-auto rounded-none mt-2 [font-family:var(--font-yui)]","data-testid":"chat-log-list",children:[e.jsx(a,{participants:o}),e.jsx(i,{}),0===c.length&&e.jsx("div",{className:"text-gray-400 py-3",children:"まだ発言はありません。"}),c.map((t=>e.jsxs("div",{children:[e.jsx(n,{chat:t}),e.jsx(i,{})]},t.uuid)))]})}export{l as default};
