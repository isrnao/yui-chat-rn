# Test Strategy

## 1. テストの目的

* 本プロジェクトの主要機能の品質を自動テストで継続的に保証する
* バグや破壊的変更の早期検知、回帰テストの自動化

---

## 2. テストの種類と方針

| 種別      | ファイル例            | 主なカバー範囲                          |
| ------- | ---------------- | -------------------------------- |
| ユニット    | `*.test.ts`      | 単関数・ユーティリティ（例: `format.test.ts`） |
| コンポーネント | `*.test.tsx`     | React部品の描画やUI操作                  |
| 統合      | `App.test.tsx`など | ユーザー操作/機能連携                      |
| E2E(将来) | （未実装）            | 本番想定ブラウザ操作（例: Playwright）        |

* テストは**Testing Library**中心、ユーザー目線重視
* カバレッジ目標は80%以上
* 外部API・Web APIは必要に応じてモック

---

## 3. テスト命名・配置規則

* ファイル名:

  * コンポーネント: `ComponentName.test.tsx`
  * ユーティリティ: `utilName.test.ts`
  * ページ: `PageName.test.tsx`
* テスト対象と**同じディレクトリ**に配置

---

## 4. テストケース命名・記述ガイド

* `describe`/`it`は**期待動作や条件を簡潔に日本語で**

  * OK: `it('正しいメッセージが表示される', ...)`
  * NG: `it('1', ...)`/`it('test', ...)`
* 失敗系・分岐・例外も明確に

  * 例: `it('invalid JSONなら空配列になる', ...)`
* describeで「機能」「パターン」単位に整理
* Arrange → Act → Assertの流れで

---

## 5. テストスタイルと品質管理

* UI要素取得はrole/label/placeholderを活用
* 副作用（localStorage, グローバルStub等）はbeforeEach/afterEachで初期化
* カバレッジは `vite.config.ts` で閾値管理
* バグ修正時は**再現テスト追加を必須**

---

## 6. CI/CD連携

* CIで全テスト・カバレッジ計測を必ず実施
* カバレッジ未達ならFail

---

## 7. モック・スナップショット指針

* 外部APIや重いUI部品は`vi.mock`/`vi.stubGlobal`でモック
* スナップショットテストはUI表示中心、ロジックは避ける

---
